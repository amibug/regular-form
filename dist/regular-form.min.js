/**
@author	amibug
@version	0.1.2
@homepage	
*/
!function(r,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("Regular")):"function"==typeof define&&define.amd?define(["Regular"],t):"object"==typeof exports?exports.RegularForm=t(require("Regular")):r.RegularForm=t(r.Regular)}(this,function(r){return function(r){function t(n){if(e[n])return e[n].exports;var i=e[n]={exports:{},id:n,loaded:!1};return r[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var e={};return t.m=r,t.c=e,t.p="",t(0)}([function(r,t,e){var n=e(1),i=(e(2),e(3)),o=e(4),a=n.extend(i).directive(o);r.exports=a},function(t,e){t.exports=r},function(r,t,e){var n=r.exports,i=Object.prototype.toString,o=Object.prototype.hasOwnProperty,a=["Function","String","Number","Date","RegExp","Error"];n.noop=function(){},n.trim=function(r){return r.trim?r.trim():r.replace(/(^\s*)|(\s*$)/g,"")},n.toArray=Array.form||function(r){return Array.prototype.slice.call(r)},n.isArray=Array.isArray||function(r){return"[object Array]"===i.call(r)},n.isObject=function(r){var t=typeof r;return"function"===t||"object"===t&&!!r};for(var u=0,c=a.length;c>u;u++)!function(r){var t=a[r];n["is"+t]=function(r){return i.call(r)==="[object "+t+"]"}}(u);n.isFunction=function(r){return"function"==typeof r||!1},n.isNaN=function(r){return n.isNumber(r)&&r!==+r},n.isBoolean=function(r){return r===!0||r===!1||"[object Boolean]"===i.call(r)},n.isNull=function(r){return null===r},n.isUndefined=function(r){return void 0===r},n.isPlainObject=function(r){if(!r||!n.isObject(r)||r.nodeType)return!1;try{if(r.constructor&&!o.call(r,"constructor")&&!o.call(r.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}var e;for(e in r);return void 0===e||o.call(r,e)},n.extend=function(){var r,t,e,i,o,a,u=arguments[0]||{},c=1,s=arguments.length,f=!1;for(n.isBoolean(u)&&(f=u,u=arguments[1]||{},c=2),n.isObject(u)||n.isFunction(u)||(u={}),s===c&&(u=this,--c),c;s>c;c++)if(null!=(r=arguments[c]))for(t in r)e=u[t],i=r[t],u!==i&&(f&&i&&(n.isPlainObject(i)||(o=n.isArray(i)))?(o?(o=!1,a=e&&n.isArray(e)?e:[]):a=e&&n.isPlainObject(e)?e:{},u[t]=n.extend(f,a,i)):void 0!==i&&(u[t]=i));return u},n.forEach=function(r,t,e){if(!n.isArray(r))return r;var i,o=r.length;if(r.forEach)return r.forEach(t,e),r;for(i=0;o>i;i++)t.call(e,r[i],i,r);return r},n.every=function(r,t,e){if(!n.isArray(r))return r;var i,o,a=r.length;if(r.every)return r.every(t,e);for(i=0;a>i;i++)if(o=iteratee.call(e,r[i],i,r),o===!1)return o;return o},n.some=function(r,t,e){if(!n.isArray(r))return r;for(var i=r.length,o=0;i>o;o++)if(t.call(e,r[o],o,r))return!0;return!1},n.keys=Object.keys||function(r){var t=[];for(var e in r)r.hasOwnProperty(e)&&t.push(t);return t},n.camelCase=function(r){return(""+r).replace(/-\D/g,function(r){return r.charAt(1).toUpperCase()})},n.aop=function(r,t,e){var i=r;return function(){var r={args:n.toArray(arguments)};return t(r),r.stopped||(r.value=i.apply(this,r.args),e(r)),r.value}},n.log=function(r,t){if(t)throw r},n.dName=function(r){return r.split("-")[1]}},function(r,t,e){var n=e(1),i=e(2),o=n.dom,a=function(r,t){var e=this;o.on(r.$element,"blur",function(){var t=e.$get(r.$model);r.$status="blur",e.$update(r.$model,(""+t).trim())}),o.on(r.$element,"focus",function(){r.$status="focus",r.$submit=!1,e.$update()}),o.on(r.$element,"keyup",function(){r.$status="keyup",e.setDirty(r.$name,!0),e.$update()}),t?this.$unwatch(r.$model,function(t,n){e.checkValidity(r.$name)}):this.$watch(r.$model,function(t,n){e.checkValidity(r.$name)})};prototype={computed:{$dirty:function(r){var t=!1,e=i.keys(r.form);t=i.some(e,function(t){return!!r.form[t].$dirty});var n=this._children;return t?t:t=i.some(n,function(r){return!!r.$get("$dirty")})},$invalid:function(r){var t=!1,e=i.keys(r.form);t=i.some(e,function(t){return!!r.form[t].$invalid});var n=this._children;return t?t:t=i.some(n,function(r){return!!r.$get("$invalid")})},$full:function(r){var t=!0,e=i.keys(r.form);return i.some(e,function(e){return r.form[e].$error.required?(t=!1,!0):void 0}),t}},config:function(r){this.supr(r),r.form={}},init:function(r){this.supr(r)},resetField:function(r,t,e){var n=this.data;i.extend(!0,n.form["$$"+r]={},{$status:"",$element:t,$name:r,$handler:[],$model:e,$dirty:!1,$invalid:!1,$submit:!1,$error:{}})},setInValidity:function(r,t){this.data.form["$$"+r].$invalid=t},setDirty:function(r,t){this.data.form["$$"+r].$dirty=t},setError:function(r,t,e){this.data.form["$$"+r].$error[t]=e},addHandler:function(r,t){var e=this.data.form["$$"+r].$handler,n=this.data,i=n.form["$$"+r];e.length||a.call(this,i),e.push(t),e.sort(function(r,t){return r.priority-t.priority})},removeHandler:function(r,t){var e=-1,n=this.data,o=n.form["$$"+r].$handler;i.some(o,function(r,n){return r.directive===t?(e=n,!0):void 0}),-1!==e&&o.splice(e,1)},checkValidity:function(r){var t=this,e=this.data;if(i.isUndefined(r)){var n=i.keys(e.form);i.forEach(n,function(r){t.checkValidity(e.form[r].$name)})}else{var o=!0,a=e.form["$$"+r],u=t.$get(a.$model);i.forEach(a.$handler,function(r){o?(o=r.handler.call(t,u),t.setError(a.$name,i.dName(r.directive),!o)):t.setError(a.$name,i.dName(r.directive),o)}),t.setInValidity(a.$name,!o)}},$$check:function(){var r=this.data,t=i.keys(r.form);return i.forEach(t,function(t){return r.form[t].$submit=!0}),this.$update(),this.$get("$invalid")}},r.exports=prototype},function(r,t,e){var n=e(1),i=e(2),o=e(5),a=e(6),u=function(r){return r&&r.type&&"expression"===r.type.toLowerCase()&&(r=this.$get(r)),r},c=function(r,t,e,n){var c,s=this,f=r.name,d=i.dName(e);f&&""!==f||i.log("you need specified a value for name",!0);var l=function(r){var e=u.call(s,t);return o[i.camelCase("check-"+d)].call(s,r,e,f)};return i.some(n,function(r){return"r-model"===r.name?(c=r.value,!0):void 0}),s.data.form["$$"+f]||s.resetField(f,r,c),s.addHandler(f,{priority:a.PRIORITY[d],directive:e,handler:l}),s.checkValidity(f),function(){s.removeHandler.call(s,f,e),s.setError(f,i.dName(e),!1),s.checkValidity(f)}},s=n.directive("r-model"),f={"r-model":{priority:100,link:function(r,t,e,n){var i=r.name;""===i||this.data.form["$$"+i]||this.resetField(i,r,t);var o=s.link.apply(this,arguments);return function(){o()}}},"r-required":{priority:110,link:function(r,t,e,n){return c.apply(this,arguments)}},"r-type":{priority:120,link:function(r,t,e,n){return c.apply(this,arguments)}},"r-length":{priority:121,link:function(r,t,e,n){return c.apply(this,arguments)}},"r-min":{priority:130,link:function(r,t,e,n){return c.apply(this,arguments)}},"r-max":{priority:140,link:function(r,t,e,n){return c.apply(this,arguments)}},"r-step":{priority:150,link:function(r,t,e,n){return c.apply(this,arguments)}},"r-pattern":{priority:150,link:function(r,t,e,n){return c.apply(this,arguments)}},"r-extend":{link:function(r,t,e,n){return c.apply(this,arguments)}}};r.exports=f},function(r,t,e){var n=e(6),i=e(2),o={checkRequired:function(r,t){return"false"===t||t===!1?!0:i.isBoolean(r)?r===!0:void 0!==r&&""!==r},checkType:function(r,t){return n[t.toUpperCase()+"_REGEXP"]?n[t.toUpperCase()+"_REGEXP"].test(r):!0},checkLength:function(r,t){return(""+r).length==t},checkMin:function(r,t){return t=parseFloat(t),i.isNumber(t)?+r>=t:!0},checkMax:function(r,t){return t=parseFloat(t),i.isNumber(t)?t>=+r:!0},checkStep:function(r,t){return t=parseFloat(t),i.isNumber(t)?+r%t===0:!0},checkPattern:function(r,t){return i.isRegExp(t)||(t=new RegExp(t)),t.test(+r)},checkExtend:function(r,t){return i.isFunction(t)?t.call(this,r):!0}};r.exports=o},function(r,t){var e={ISO_DATE_REGEXP:/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,URL_REGEXP:/^[A-Za-z][A-Za-z\d.+-]*:\/*(?:\w+(?::\w+)?@)?[^\s\/]+(?::\d+)?(?:\/[\w#!:.?+=&%@\-\/]*)?$/,EMAIL_REGEXP:/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,NUMBER_REGEXP:/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,DATE_REGEXP:/^(\d{4})-(\d{2})-(\d{2})$/,DATETIMELOCAL_REGEXP:/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,WEEK_REGEXP:/^(\d{4})-W(\d\d)$/,MONTH_REGEXP:/^(\d{4})-(\d\d)$/,TIME_REGEXP:/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,PRIORITY:{required:10,type:20,length:30,min:40,max:50,step:60,pattern:70,extend:80}};r.exports=e}])});